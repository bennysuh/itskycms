<div class="col-lg-12">
    <div class="tabbable">
        <ul class="nav nav-tabs">
            <li class="active">
                <a href="#home" data-toggle="tab">
                    <span class="glyphicon glyphicon-cog"></span> {:L('BASE_SET')}
                </a>
            </li>
            <li>
                <a href="#seo" data-toggle="tab">
                    <span class="glyphicon glyphicon-eye-open"></span> {:L('SEO_SET')}
                </a>
            </li>
        </ul>
        <form class="form-horizontal" role="form" autocomplete="off">
            <input type="hidden" id="type" name="type" value="0">
            <div class="tab-content">
                <div id="home" class="tab-pane in active">
                    <div class="form-group">
                        <label class="col-lg-2 control-label no-padding-right">{:L('SELETE_MODULE')}:</label>
                        <div class="col-lg-5">
                            <div class="input-group col-lg-8 select-click">
                            <input class="hide" type="text" name="mid" value=""/>
                            <div class="form-control select-input cude"></div>
                            <span class="input-group-addon cude">
                                <i class="glyphicon glyphicon-menu-down"></i>
                            </span>
                        </div>
                        <div class="col-lg-8">
                            <div class="select-choices">
                                <ul class="list-unstyled select-option" data-name="mid">
                                    <li data-val="">{:L('SELETE')}</li>
                                    <foreach name="modules" item="v">
                                    <li data-val="{$v.id}">{:L($v['title'])}</li>
                                    </foreach>
                                    <li data-val="0">{:L('OURL')}</li>
                                </ul>
                            </div>
                        </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 control-label no-padding-right">{:L('PRE_CAT')}:</label>
                        <div class="col-lg-5">
                            <div class="input-group col-lg-8 select-click">
                                <sky:assign name="pid" value=":($Think.get.pid||$vo.pid)"/>
                                <input class="hide" type="text" name="pid" value="{$pid|default=0}"/>
                                <div class="form-control select-input cude"></div>
                                <span class="input-group-addon cude">
                                    <i class="glyphicon glyphicon-menu-down"></i>
                                </span>
                            </div>
                            <div class="col-lg-8">
                                <div class="select-choices">
                                    <ul class="list-unstyled select-option" data-name="pid">
                                        <li data-val="0">{:L('TOP_CAT')}</li>
                                        {$cats}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 control-label no-padding-right">{:L('CAT_NAME')}:</label>
                        <div class="col-lg-10">
                            <input class="col-lg-4" type="text" name="name" placeholder="{$Think.LANG_SET}"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 control-label no-padding-right">{:L('CAT_DIR')}:</label>
                        <div class="col-lg-10">
                            <input class="col-lg-4" type="text" name="dir"/>
                        </div>
                    </div>
                    <div id="url" class="form-group hide">
                        <label class="col-lg-2 control-label no-padding-right">{:L('URL')}:</label>
                        <div class="col-lg-10">
                            <input class="col-lg-6" type="text" name="url"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 control-label no-padding-right">{:L('CAT_DIRS')}:</label>
                        <div class="col-lg-10">
                            <label>
                                <input class="ace" type="checkbox" name="dirs" value="1" checked="checked"/>
                                <span class="lbl"> {:L('CAT_DIRS_INFO')}</span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 control-label no-padding-right">{:L('IS_NAV')}:</label>
                        <div class="col-lg-10">
                            <label>
                                <input class="ace ace-switch ace-switch-7" type="checkbox" name="isnav"
                                       value="1" checked="checked"/>
                                <span class="lbl"></span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 control-label no-padding-right">{:L('IS_HTML')}:</label>
                        <div class="col-lg-10">
                            <label>
                                <input class="ace ace-switch ace-switch-7" type="checkbox" name="ishtml" value="1"/>
                                <span class="lbl"></span>
                            </label>
                        </div>
                    </div>
                    <div id="urlrule" class="form-group hide">
                        <label class="col-lg-2 control-label no-padding-right">{:L('URL_RULE')}:</label>
                        <div class="col-lg-4">
                            <div class="input-group col-lg-12 select-click">
                                <input class="hide" type="text" name="urlruleid" value="0"/>
                                <div class="form-control select-input cude"></div>
                                <span class="input-group-addon cude">
                                    <i class="glyphicon glyphicon-menu-down"></i>
                                </span>
                            </div>
                            <div class="col-lg-12">
                                <div class="select-choices">
                                    <ul class="list-unstyled select-option" data-name="urlruleid">
                                        <li data-val="0">{:L('SELETE')}</li>
                                        <foreach name="urlrules" item="v">
                                        <li data-val="{$v.id}">{$v.listexample}</li>
                                        </foreach>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 control-label no-padding-right">{:L('PAGE_ITEM')}:</label>
                        <div class="col-lg-10">
                            <input class="col-lg-2" type="text" name="pagesize" maxlength="3"/>
                            <span class="red pull-left mt5 pl5"> {:L('PAGE_ITEM_TIP')}</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 control-label no-padding-right">{:L('LIST_TPL')}:</label>
                        <div class="col-lg-3">
                            <div class="input-group col-lg-12 select-click">
                                <input class="hide" type="text" name="listtpl" value=""/>
                                <div class="form-control select-input cude"></div>
                                <span class="input-group-addon cude">
                                    <i class="glyphicon glyphicon-menu-down"></i>
                                </span>
                            </div>
                            <div class="col-lg-12">
                                <div class="select-choices">
                                    <ul class="list-unstyled select-option" data-name="listtpl">
                                        <li data-val="">{:L('SELETE')}</li>
                                        <foreach name="modules" item="v">
                                        <if condition="$v.name eq 'Page'">
                                        <li class="hide" data-val="{$v.name}_index">{$v.name}_index.html</li>
                                        <else/>
                                        <li class="hide" data-val="{$v.name}_list">{$v.name}_list.html</li>
                                        </if>
                                        </foreach>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <label class="mt5">
                            <input class="ace" type="checkbox" name="listtype" value="1"/>
                            <span class="lbl"> {:L('IS_COVER_CAT')}</span>
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 control-label no-padding-right">{:L('CONTENT_TPL')}:</label>
                        <div class="col-lg-3">
                            <div class="input-group col-lg-12 select-click">
                                <input class="hide" type="text" name="contenttpl" value=""/>
                                <div class="form-control select-input cude"></div>
                                <span class="input-group-addon cude">
                                    <i class="glyphicon glyphicon-menu-down"></i>
                                </span>
                            </div>
                            <div class="col-lg-12">
                                <div class="select-choices">
                                    <ul class="list-unstyled select-option" data-name="contenttpl">
                                        <li data-val="">{:L('SELETE')}</li>
                                        <foreach name="modules" item="v">
                                        <if condition="$v.name eq 'Page'">
                                        <li class="hide" data-val="{$v.name}_index">{$v.name}_index.html</li>
                                        <else/>
                                        <li class="hide" data-val="{$v.name}_show">{$v.name}_show.html</li>
                                        </if>
                                        </foreach>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="seo" class="tab-pane">
                    <div class="form-group">
                        <label class="col-lg-2 control-label no-padding-right">{:L('SEO_TITLE')}:</label>
                        <div class="col-lg-10">
                            <input class="col-lg-7" type="text" name="title"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 control-label no-padding-right">{:L('SEO_KEYWORDS')}:</label>
                        <div class="col-lg-10">
                            <input class="col-lg-7" type="text" name="keywords"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 control-label no-padding-right">{:L('SEO_DESCRIPTION')}:</label>
                        <div class="col-lg-10">
                            <textarea class="col-lg-8" name="description"></textarea>
                        </div>
                    </div>
                </div>
                <div class="clearfix form-actions">
                    <div class="col-lg-offset-1 col-lg-9">
                        <button class="btn btn-info mr10" type="submit">
                            <i class="glyphicon glyphicon-ok"></i> {:L('SUBMIT')}
                        </button>
                        <button class="btn ml10" type="reset">
                            <i class="glyphicon glyphicon-repeat"></i> {:L('RESET')}
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<import type="js" file="js.select"/>
<script type="text/javascript">
    var pan = '<li><a onclick="load(event,this)" href="{:U(CONTROLLER_NAME.'/index',$vl)}">{:L('M_'.$Think.CONTROLLER_NAME.'_INDEX')}</a></li>\n\
<li class="active">{:L($Think.ACTION_NAME)}</li>';
    $('#breadcrumbs .breadcrumb li:gt(0)').remove();
    $('#breadcrumbs .breadcrumb').append(pan);
    $('.page-header h1').empty();
    $('.page-header h1').append('{:L('M_'.$Think.CONTROLLER_NAME.'_INDEX')}<small class="glyphicon glyphicon-menu-right"> {:L($Think.ACTION_NAME)}</small>');
    $('input[name="ishtml"]').click(function(){
        $('#urlrule').toggleClass('hide');
    });
    var modarr = new Array();
    <foreach name="modules" item="v">
    modarr[{$v.id}] = '{$v.name}';
    </foreach>
    $('ul[data-name="mid"] li').click(function(){
        var mid = $(this).attr('data-val');
        if(mid === '0'){
            $('#url').removeClass('hide');
            $('#type').val('1');
        }else{
            $('#type').val('0');
            $('#url').addClass('hide');
        }
        $('ul[data-name="listtpl"] li:gt(0)').addClass('hide');
        $('ul[data-name="contenttpl"] li:gt(0)').addClass('hide');
        var deflist = $('ul[data-name="listtpl"] li:eq(0)').text();
        var defshow = $('ul[data-name="contenttpl"] li:eq(0)').text();
        $('input[name="listtpl"]').val('').nextAll('.select-input').text(deflist);
        $('input[name="contenttpl"]').val('').nextAll('.select-input').text(defshow);
        $('li[data-val^="'+modarr[mid]+'_"]').removeClass('hide');
    });
    $('form[role="form"]').validator({
        valid:function(form){
            $.ajax({
                type: 'POST',
                url: '{:U('Category/'.ACTION_NAME,$vl)}',
                data:$(form).serialize(),
                success: function(data){
                    show_msg(data);
                }
            });
        }
    });
</script>